<template>
  <div class="form__time">
    <div class={computedFormItemClassName}>
      <label lwc:if={label} class={computedLabelClassName} for="time-input">
        {label}
        <span lwc:if={required} class="visually-hidden">
          ({requiredLabel})</span
        >
      </label>
      <slot name="label"> </slot>

      <span lwc:if={fieldLevelHelp} id="helper" class="form__help">
        {fieldLevelHelp}
      </span>

      <div class="sfgpsds-form-element__control form__predictive">
        <div class="sfgpsds-combobox_container">
          <div
            class="sfgpsds-combobox sfgpsds-dropdown-trigger sfgpsds-dropdown-trigger_click"
            onblur={handleComponentLosesFocus}
          >
            <div class="sfgpsds-combobox__form-element" role="none">
              <input
                class={computedInputClassName}
                autocomplete="off"
                id="time-input"
                role="combobox"
                type="text"
                name={name}
                disabled={disabled}
                required={required}
                readonly={readOnly}
                placeholder={placeholder}
                tabindex={tabIndex}
                aria-expanded="false"
                aria-haspopup="listbox"
                aria-autocomplete="both"
                aria-describedby={computedAriaDescribedBy}
                aria-controls="time_picker_ul"
                aria-label={ariaLabel}
                aria-readonly={readOnly}
                aria-invalid={isAriaInvalid}
                value={_displayValue}
                onblur={showLookup}
                onchange={onInputChange}
                onkeydown={handleKeyboardEvent}
                onkeyup={handleKeyUp}
                onmousedown={showLookup}
                data-sfgpsds-input
              />
            </div>

            <div
              class="sfgpsds-dropdown sfgpsds-dropdown_fluid sfgpsds-dropdown_length-5"
              role="listbox"
            >
              <ul
                id="time_picker_ul"
                class="sfgpsds-listbox sfgpsds-listbox_vertical"
                role="presentation"
                onmousedown={scrollerClickOnList}
              >
                <template
                  for:each={computedSafeOptions}
                  for:item="item"
                  for:index="index"
                >
                  <li
                    key={item.id}
                    class="sfgpsds-listbox__item"
                    role="presentation"
                  >
                    <div
                      id={item.id}
                      data-index={index}
                      data-selected={item.selected}
                      data-val={item.value}
                      data-timepicker-option
                      role="option"
                      aria-selected={item.selected}
                      class="sfgpsds-listbox__option sfgpsds-listbox__option_plain sfgpsds-media sfgpsds-media_small sfgpsds-media_center"
                      onmousedown={selectOption}
                    >
                      <span
                        class="sfgpsds-media__figure sfgpsds-listbox__option-icon"
                      >
                        <span
                          lwc:if={item.selected}
                          class="sfgpsds-icon-small"
                          aria-hidden="true"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            height="18"
                            width="18"
                            viewBox="0 0 24 24"
                          >
                            <path
                              d="M9.55 18 3.85 12.3 5.275 10.875 9.55 15.15 18.725 5.975 20.15 7.4Z"
                            ></path>
                          </svg>
                        </span>
                      </span>

                      <span class="sfgpsds-media__body">
                        <span
                          class="sfgpsds-listbox__option-text"
                          title={item.value}
                        >
                          {item.value}
                        </span>
                      </span>
                    </div>
                  </li>
                </template>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <span
      lwc:if={sfGpsDsIsError}
      class="form__error"
      aria-live="assertive"
      role="alert"
      id="errorMessageBlock"
    >
      {sfGpsDsErrorMessage}
    </span>
  </div>
</template>
