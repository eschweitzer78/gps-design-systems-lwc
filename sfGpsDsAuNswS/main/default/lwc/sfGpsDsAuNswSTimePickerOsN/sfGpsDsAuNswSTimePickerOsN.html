<template>
  <div class="form__time">
    <div class={computedFormItemClassName}>
      <label
        if:true={label}
        class={computedLabelClassName}
        style="width: auto"
        for="time-input"
      >
        {label}
        <span if:true={required} class="visually-hidden">
          ({requiredLabel})</span
        >
      </label>
      <slot name="label"> </slot>

      <span if:true={fieldLevelHelp} id="helper" class="form__help">
        {fieldLevelHelp}
      </span>

      <div class="form__predictive">
        <div class="sfgpsds-combobox_container">
          <div
            class="sfgpsds-combobox sfgpsds-dropdown-trigger sfgpsds-dropdown-trigger_click"
            aria-expanded={_isOpen}
            aria-haspopup="listbox"
            role="combobox"
            onblur={handleComponentLosesFocus}
          >
            <div class="sfgpsds-combobox__form-element" role="none">
              <input
                class={computedInputInputClassName}
                autocomplete="off"
                id="time-input"
                role="textbox"
                type="text"
                name={name}
                disabled={disabled}
                required={required}
                readonly={readOnly}
                aria-readonly={readOnly}
                aria-invalid={isAriaInvalid}
                placeholder={placeholder}
                tabindex={tabIndex}
                aria-autocomplete="both"
                aria-describedby={computedAriaDescribedBy}
                value={_displayValue}
                onblur={showLookup}
                onchange={onInputChange}
                onkeydown={handleKeyboardEvent}
                onkeyup={handleKeyUp}
                onmousedown={showLookup}
              />
            </div>

            <ul
              if:true={_isOpen}
              class="sfgpsds-dropdown sfgpsds-dropdown_fluid sfgpsds-dropdown_length-5 form__predictive-list"
              id="time_picker_ul"
              role="listbox"
              onmousedown={scrollerClickOnList}
            >
              <template for:each={options} for:item="item" for:index="index">
                <li
                  key={item.id}
                  id={item.id}
                  data-index={index}
                  data-selected={item.selected}
                  data-val={item.value}
                  data-timepicker-option
                  role="option"
                  aria-selected={item.selected}
                  class="sfgpsds-media sfgpsds-listbox__option sfgpsds-media_small sfgpsds-media_center"
                  onmousedown={selectOption}
                >
                  <span class="sfgpsds-media__figure">
                    <span
                      if:true={item.selected}
                      class="sfgpsds-icon-small"
                      aria-hidden="true"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        height="18"
                        width="18"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M9.55 18 3.85 12.3 5.275 10.875 9.55 15.15 18.725 5.975 20.15 7.4Z"
                        ></path>
                      </svg>
                    </span>
                  </span>

                  <span class="sfgpsds-media__body">
                    <span class="sfgpsds-truncate" title={item.value}>
                      {item.value}
                    </span>
                  </span>
                </li>
              </template>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <span
      if:true={isError}
      class="form__error"
      data-timepicker-error-block
      aria-live="assertive"
      role="alert"
      id="errorMessageBlock"
    >
      {errorMessage}
    </span>
  </div>
</template>
