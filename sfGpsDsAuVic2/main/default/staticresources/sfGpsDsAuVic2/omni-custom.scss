.omniscript-body {
  --local-background-colour: var(--rpl-clr-focus);

  .os-step-label[omnistudio-omniscriptStep_omniscriptStep] {
    font-size: var(--rpl-type-size-4);
    font-weight: var(--rpl-type-weight-bold);
    letter-spacing: var(--rpl-type-ls-4);
    line-height: var(--rpl-type-lh-6);
  
    @media (min-width: 992px) {
      font-size: var(--rpl-type-size-6);
      letter-spacing: var(--rpl-type-ls-5);
      line-height: var(--rpl-type-lh-8);
    }

    &:focus-visible {
      outline: 0;
    }
  }
  
  .vlc-separator[omnistudio-omniscriptStep_omniscriptStep] {
    border: none;
    margin-top: 0;
    margin-bottom: var(--rpl-sp-4);
  }

  .slds-button:not(.Date) {
    --local-border-width: var(--rpl-border-2);
    --rpl-focusable-border-width: var(--local-border-width);
    -moz-appearance: none;
    appearance: none;
    padding: calc(var(--rpl-sp-4) - var(--local-border-width)) calc(var(--rpl-sp-5) - var(--local-border-width));
    background: none;
    border-radius: var(--rpl-border-radius-2);
    border-style: solid;
    border-width: var(--local-border-width);
    gap: var(--rpl-sp-2);
    justify-content: center;
    -webkit-text-decoration: none;
    text-decoration: none;
    width: 100%;

    @media (min-width: 768px) { /*576px) {*/
      width: auto;
    }

    font-size: var(--rpl-type-size-2);
    letter-spacing: var(--rpl-type-ls-1);
    line-height: var(--rpl-type-lh-2);
    font-weight: var(--rpl-type-weight-bold);

    --local-filled-bg-clr: var(--rpl-clr-primary);
    --local-filled-bg-clr-hover: var(--rpl-clr-primary-alt);
    --local-filled-type-clr: var(--rpl-clr-type-primary-contrast);
    --local-outlined-border-clr: var(--rpl-clr-primary);
    --local-outlined-border-clr-hover: var(--rpl-clr-primary-alt);
    --local-outlined-type-clr: var(--rpl-clr-type-primary-accessible);
    --local-outlined-type-clr-hover: var(--rpl-clr-type-primary-alt-accessible);
    --local-white-type-clr: var(--rpl-clr-type-primary-accessible);
    --local-white-type-clr-hover: var(--rpl-clr-type-primary-alt-accessible);


    &.slds-button_base,
    &.slds-button_neutral {
      color: var(--local-outlined-type-clr);
      background-color: var(--rpl-clr-light);
      border-color: var(--local-outlined-border-clr);

      &:active, &:hover {
        color: var(--local-outlined-type-clr-hover);
        border-color: var(--local-outlined-border-clr-hover);
      }
    }


    &.slds-button_brand,
    &.slds-button_brand.slds-button_neutral {
      background-color: var(--local-filled-bg-clr);
      border-color: var(--local-filled-bg-clr);
      color: var(--local-filled-type-clr);

      &:active, &:hover {
        background-color: var(--local-filled-bg-clr-hover);
         border-color: var(--local-filled-bg-clr-hover);
      }
    }

    &.slds-p-horizontal_none {
      padding: calc(var(--rpl-sp-4) - var(--local-border-width)) calc(var(--rpl-sp-5) - var(--local-border-width)) !important;
    }

    &:hover {
      cursor: pointer;
      -webkit-text-decoration: underline;
      text-decoration: underline;
    }

    &:focus {
      box-shadow: none;
    }

    &:focus-visible {
      background-color: var(--local-background-colour) !important;
      color: var(--rpl-clr-type-focus-contrast) !important;
      
      border-color: var(--rpl-clr-focus);
      border-radius: 0;
      border-width: var(--rpl-focusable-border-width, 0);
      -webkit-text-decoration: none;
      text-decoration: none;
      text-decoration-line: none;
      position: relative;
      box-shadow: none !important;

      &:after {
        top: auto!important;
        right: auto!important;
        bottom: calc(var(--rpl-focusable-border-width, 0px) * -1)!important;
        left: calc(0px - var(--rpl-focusable-border-width, 0px))!important;
  
        content: "";
        background-color: var(--rpl-clr-dark);
        position: absolute;
        z-index: var(--rpl-layer-1);
        height: var(--rpl-border-3);
        width: calc(100% + var(--rpl-focusable-border-width, 0%)* 2);
      }
    }
  }
}

.omniscript-step__body {
  > .slds-grid {
    gap: var(--rpl-sp-7);
  }

  fieldset.slds-form-element,
  fieldset.omni-block_content[omnistudio-omniscriptBlock_omniscriptBlock] {
    /* .rpl-form fieldset */
    min-width: auto;

    /* .rpl-form__fieldset */
    border: 0;
    padding: 0 !important;
    margin: 0;
  }

  .slds-form-element {
    legend {
      /* .rpl-form-label */
      /*
      display: inline-block;
      font-size: var(--rpl-type-size-2);
      font-weight: var(--rpl-type-weight-bold);
      line-height: var(--rpl-type-lh-4);
      letter-spacing: var(--rpl-type-ls-1);
      */
      margin-bottom: var(--rpl-sp-4);

      /* counter .slds-float_left */
      float: none;
      padding-right: 0;
      padding-top: 0;
    }

    .slds-form-element__label {
      /* .rpl-form-label */
      font-size: var(--rpl-type-size-2);
      font-weight: var(--rpl-type-weight-bold);
      line-height: var(--rpl-type-lh-4);
      letter-spacing: var(--rpl-type-ls-1);
      margin-bottom: var(--rpl-sp-4);

      color: inherit;

      &.inline,
      &.slds-show--inline {
        display: flex;
      }
    }

    .slds-form-element__legend {
      font-weight: var(--rpl-type-weight-bold);
    }
    
  
    input.slds-input,
    .slds-textarea {
      border: 0;
      outline: 0;
      width: 100%;
      height: 100%;
      padding-top: var(--rpl-sp-3);
      padding-bottom: var(--rpl-sp-3);
      padding-left: var(--rpl-sp-4);
      padding-right: var(--rpl-sp-4);
      border: var(--rpl-border-1) solid var(--rpl-clr-neutral-600);
      border-radius: var(--rpl-border-radius-2);
      background: var(--rpl-clr-neutral-100);

      --local-icon-spacing: var(--rpl-sp-4);
      font-size: var(--rpl-type-size-2);
      line-height: var(--rpl-type-lh-4);
      letter-spacing: var(--rpl-type-ls-1);

      &:disabled {
        cursor: not-allowed;
        color: var(--rpl-clr-neutral-300);
        border-color: var(--rpl-clr-neutral-200);
      }
    }

    .slds-form-element__control {
      &.slds-grid {
        gap: var(--rpl-sp-6);
      }

      .slds-radio_faux,
      .slds-checkbox_faux {
        width: var(--rpl-sp-6);
        height: var(--rpl-sp-6);
        background: var(--rpl-clr-neutral-100);
        border: var(--rpl-border-1) solid var(--rpl-clr-neutral-600);
        transition: none;
        margin-right: 0;
      }

      .slds-checkbox_faux {
        border-radius: var(--rpl-border-radius-1);
      }

      .slds-checkbox {
        [type=checkbox]:checked + .slds-checkbox_faux:after, 
        [type=checkbox]:checked + .slds-checkbox--faux:after, 
        [type=checkbox]:checked ~ .slds-checkbox_faux:after,
        [type=checkbox]:checked ~ .slds-checkbox--faux:after,
        [type=checkbox]:checked + .slds-checkbox__label .slds-checkbox_faux:after, [type=checkbox]:checked + .slds-checkbox__label .slds-checkbox--faux:after {
          width: var(--rpl-sp-2);
          height: var(--rpl-sp-2);
          border-bottom: 2px solid currentColor;
          border-left: 2px solid currentColor;
        }

        .slds-form-element__label {
          display: inline;
          font-weight: var(--rpl-type-weight-regular);
        }
      }

      .slds-radio  {
        display: flex;

        input {
          appearance: none;
        }

        [type=radio]:checked + .slds-radio_faux:after,
        [type=radio]:checked + .slds-radio--faux:after,
        [type=radio]:checked ~ .slds-radio_faux:after,
        [type=radio]:checked ~ .slds-radio--faux:after,
        [type=radio]:checked + .slds-radio__label .slds-radio_faux:after,
        [type=radio]:checked + .slds-radio__label .slds-radio--faux:after {
          width: var(--rpl-sp-4);
          height: var(--rpl-sp-4);
          background: currentColor;
        }

        [type=radio]:focus + .slds-radio_faux, 
        [type=radio]:focus + .slds-radio--faux,
        [type=radio]:focus ~ .slds-radio_faux, 
        [type=radio]:focus ~ .slds-radio--faux,
        [type=radio]:focus + .slds-radio__label .slds-radio_faux, 
        [type=radio]:focus + .slds-radio__label .slds-radio--faux {
          border-color: var(--rpl-clr-neutral-600);;
          box-shadow: 0 0 0 var(--rpl-border-1) var(--rpl-clr-dark) inset,0 0 0 var(--rpl-border-3) var(--rpl-clr-focus);
        }

        .slds-form-element__label {
          margin-left: var(--rpl-sp-3);
          margin-top: 1px;
          font-size: var(--rpl-type-size-2);
          line-height: var(--rpl-type-lh-4);
          letter-spacing: var(--rpl-type-ls-1);

          font-weight: var(--rpl-type-weight-regular);
        }
      }
    }

    .slds-input-has-icon .slds-input__icon,
    .slds-input-has-icon .slds-input__icon .slds-icon_xx-small,
    .slds-input-has-icon .slds-input__icon .slds-icon_x-small {
      width: 1.4rem;
      height: 1.4rem;
      right: 1.4rem;
    }

    &.slds-text-block {
      font-size: var(--rpl-type-size-2);
    }

    .slds-dropdown {
      font-size: var(--rpl-type-size-2);
      max-width: none;
    }

    .slds-date-picker,
    .slds-datepicker__month {
      font-size: var(--rpl-type-size-2);
    }

    .slds-datepicker tbody > tr > td {
      font-size: var(--rpl-type-size-1)
    }

    abbr.slds-required {
      order: 2;
      color: transparent;

      &:after {
        color: var(--rpl-clr-error);
        font-weight: var(--rpl-type-weight-regular);
        font-size: var(--rpl-type-size-1);
        line-height: var(--rpl-type-lh-1);
        letter-spacing: var(--rpl-type-ls-3);
        content: "(Required)";
      }
    }

    &.slds-has-error {
      border-left: var(--rpl-border-3) solid var(--rpl-clr-error);
      padding-left: var(--rpl-sp-3);
      display: flex;
      flex-direction: column;

      .slds-form-element__help {
        order: 2;
        color: var(--rpl-clr-error);
        margin-bottom: var(--rpl-sp-4);
        font-weight: var(--rpl-type-weight-bold);
        font-size: var(--rpl-type-size-2);
        line-height: var(--rpl-type-lh-4);
        letter-spacing: var(--rpl-type-ls-1);
        display: flex;
        align-items: center;

        &:before {
          display: inline-block;
          margin-right: var(--rpl-sp-2);
          margin-top: 6px;
          width: var(--rpl-icon-size, 16px);
          height: var(--rpl-icon-size, 16px);
          background-color: var(--rpl-clr-error);
          content: "";
          --svg: url(data:image/svg+xml,%3Csvg%20id%3D%22icon%22%20viewBox%3D%220%200%2024%2024%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22currentColor%22%3E%3Cpath%20d%3D%22M12%2C0C5.4%2C0%2C0%2C5.4%2C0%2C12c0%2C6.6%2C5.4%2C12%2C12%2C12c6.6%2C0%2C12-5.4%2C12-12C24%2C5.4%2C18.6%2C0%2C12%2C0z%20M12%2C20c-1.1%2C0-2-0.9-2-2s0.9-2%2C2-2s2%2C0.9%2C2%2C2S13.1%2C20%2C12%2C20z%20M14%2C12c0%2C1.1-0.9%2C2-2%2C2s-2-0.9-2-2V6c0-1.1%2C0.9-2%2C2-2s2%2C0.9%2C2%2C2V12z%22%2F%3E%3C%2Fsvg%3E);
          mask: var(--svg);
          -webkit-mask: var(--svg);
        }
      }

      .slds-form-element__control {
        order: 3;
      }

      .slds-textarea,
      input {
        box-shadow: none;
        border: var(--rpl-border-1) solid var(--rpl-clr-error);
      }
    }

    input.slds-input,
    .slds-textarea {
      &:focus {
        border-radius: 0;
        outline: none;
        box-shadow: 0 0 0 var(--rpl-border-1) var(--rpl-clr-dark) inset, 0 0 0 var(--rpl-border-3) var(--rpl-clr-focus);
      }
    }
  }

  omnistudio-omniscript-edit-block {
    .slds-text-heading_small {
      /* .rpl-form-label */
      font-size: var(--rpl-type-size-2);
      font-weight: var(--rpl-type-weight-bold);
      line-height: var(--rpl-type-lh-4);
      letter-spacing: var(--rpl-type-ls-1);
      margin-bottom: var(--rpl-sp-4);

      color: inherit;

      &.inline,
      &.slds-show--inline {
        display: flex;
      }
    }

    .slds-text-heading--label.slds-text-title_caps,
    .omni-editblock-table-row {
      font-size: var(--rpl-type-size-2);
      font-weight: var(--rpl-type-weight-regular);
      line-height: var(--rpl-type-lh-4);
      letter-spacing: var(--rpl-type-ls-1);
    }

    .slds-dropdown {
      font-size: var(--rpl-type-size-2);
      max-width: none;
    }  
  }

  omnistudio-omniscript-block .slds-accordion__summary-action {
    justify-content: flex-start !important;
    padding-left: 0.5rem !important;
  }

  c-omniscript-formatted-rich-text {
    p {
      display: block;
      font-size: var(--rpl-type-size-2);
      letter-spacing: var(--rpl-type-ls-1);
      line-height: var(--rpl-type-lh-4);
      margin-top: var(--rpl-sp-4);
    }

    h3 {
      font-size: var(--rpl-type-size-3);
      font-weight: var(--rpl-type-weight-bold);
      letter-spacing: var(--rpl-type-ls-2);
      line-height: var(--rpl-type-lh-5);

      @media (min-width: 992px) {
        font-size: var(--rpl-type-size-4);
        letter-spacing: var(--rpl-type-ls-4);
        line-height: var(--rpl-type-lh-6);
      }
    }
  }
}

.omniscript-sfl-actions {
  padding-bottom: 2rem;
  display: flex;
  row-gap: 1rem;

  @media screen and (max-width: 768px) {
    flex-direction: column;
    align-items: stretch;
  }
   
  > div:last-of-type {
    padding: 0 !important;
  }
}

.omniscript-button-position {
  gap: 1rem;
}

@media (min-width: 48em) {
  .omniscript-btn-previous~.omniscript-btn-next, 
  .omniscript-btn-previous~.omniscript-btn-save-for-later {
      margin-left: 0;
  }

  .omniscript-btn-previous,
  .omniscript-btn-next,
  .omniscript-btn-save-for-later {
    margin-bottom: 0;
    width: auto;
  }
}

.omniscript-step__body {
  .slds-modal__footer {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
  }

  .slds-modal__footer .slds-button + .slds-button {
    margin-left: 0;
  }
}

.omniscript-side-content {
  .omni-stepchart-heading[omnistudio-omniscriptStepChart_omniscriptStepChart] {
    font-size: var(--rpl-type-size-2);
    font-weight: var(--rpl-type-weight-bold);
    letter-spacing: var(--rpl-type-ls-1);
    line-height: var(--rpl-type-lh-4); 

    @media (min-width: 992px) {
      font-size: var(--rpl-type-size-3);
      letter-spacing: var(--rpl-type-ls-2);
      line-height: var(--rpl-type-lh-5);
    }
  }

  .slds-progress__item_content[omnistudio-omniscriptStepChartItems_omniscriptStepChartItems_vertical] {
    font-size: var(--rpl-type-size-2);
    letter-spacing: var(--rpl-type-ls-1);
    line-height: var(--rpl-type-lh-4);
  }
}