<template>
  <!-- sldsValidatorIgnore -->
  <c-sf-gps-ds-au-vic2-combobox-os-n
    lwc:ref="childInput"
    label={mergedLabel}
    disabled={_readOnly}
    required={_propSetMap.required}
    required-label={allCustomLabelsUtil.OmniRequired}
    placeholder={mergedPlaceholder}
    options={decoratedOptions}
    value={lookupDisplay}
    field-level-help={mergedHelpText}
    searchable="true"
    message-when-value-missing={_messageWhenValueMissing}
    data-omni-input
    onchange={handleChange}
    class="rpl-form__wrapper"
    unselect-label={allCustomLabelsUtil.OmniClear}
  >
    <template if:true={_propSetMap.repeat}>
      <span
        slot="label"
        style="bottom: 7px; right: 7px"
        class={_styleClasses.repeatContainer}
        role="group"
      >
        <button
          if:true={canRepeat}
          class={_styleClasses.repeatAdd}
          onclick={handleAdd}
        >
          <omnistudio-icon
            icon-name="utility:add"
            alternative-text="Repeat Select"
            extraclass={_styleClasses.repeatIcons}
            size="xx-small"
          >
          </omnistudio-icon>
        </button>
        <button
          if:true={canRemove}
          class={_styleClasses.repeatRemove}
          onclick={handleRemove}
        >
          <omnistudio-icon
            icon-name="utility:close"
            alternative-text="Remove Select"
            extraclass={_styleClasses.repeatIcons}
            size="xx-small"
          >
          </omnistudio-icon>
        </button>
      </span>
    </template>
  </c-sf-gps-ds-au-vic2-combobox-os-n>

  <template if:true={isPageLoading}>
    <omnistudio-spinner
      variant="brand"
      alternative-text={allCustomLabelsUtil.OmniSpinnerTextLoading}
      theme="slds"
      size="small"
    >
    </omnistudio-spinner>
  </template>
</template>
