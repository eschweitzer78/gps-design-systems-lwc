<template>
  <div
    id="sf-gps-ds-uk-gov-date-picker-os-n"
    data-sfgpsds-input
    class={computedFormGroupClassName}
  >
    <fieldset
      class="govuk-fieldset"
      role="group"
      aria-describedby={computedAriaDescribedBy}
    >
      <legend if:true={label} class={computedLegendClassName}>
        <h1 lwc:if={computedIsH1} class="govuk-fieldset__heading">{label}</h1>
        <h2 lwc:elseif={computedIsH2} class="govuk-fieldset__heading">
          {label}
        </h2>
        <h3 lwc:elseif={computedIsH3} class="govuk-fieldset__heading">
          {label}
        </h3>
        <span lwc:else>{label}</span>
        <slot name="label"></slot>
      </legend>

      <div if:true={fieldLevelHelp} id="helper" class="govuk-hint">
        {fieldLevelHelp}
      </div>

      <p
        if:true={computedShowErrorMessageBlock}
        class="govuk-error-message"
        aria-live="assertive"
        role="alert"
        id="errorMessageBlock"
      >
        <span class="govuk-visually-hidden">{sfGpsDsErrorSrLabel}</span
        >{sfGpsDsErrorMessage}
      </p>

      <div class="govuk-date-input" id="date-input">
        <div class="govuk-date-input__item">
          <div class={computedItemFormGroupClassName}>
            <label
              class="govuk-label govuk-date-input__label"
              for="date-input-day"
            >
              {dayLabel}
            </label>

            <input
              class={computedDateDayInputClassName}
              type="text"
              id="date-input-day"
              aria-label={ariaLabel}
              tabindex={tabIndex}
              readonly={readOnly}
              aria-readonly={readOnly}
              required={required}
              placeholder={placeholder}
              disabled={disabled}
              inputmode="numeric"
              name="date-input-day"
              value={dayValue}
              aria-invalid={ariaInvalid}
              onkeyup={sfGpsDsHandleDayChange}
              onchange={sfGpsDsHandleDayChange}
              onblur={sfGpsDsHandleDateBlur}
              onfocus={sfGpsDsHandleDateFocus}
            />
          </div>
        </div>

        <div class="govuk-date-input__item">
          <div class={computedItemFormGroupClassName}>
            <label
              class="govuk-label govuk-date-input__label"
              for="date-input-month"
            >
              {monthLabel}
            </label>

            <input
              class={computedDateMonthInputClassName}
              type="text"
              id="date-input-month"
              value={monthValue}
              aria-label={ariaLabel}
              tabindex={tabIndex}
              readonly={readOnly}
              aria-readonly={readOnly}
              required={required}
              placeholder={placeholder}
              disabled={disabled}
              inputmode="numeric"
              name="date-input-month"
              aria-invalid={ariaInvalid}
              onkeyup={sfGpsDsHandleMonthChange}
              onchange={sfGpsDsHandleMonthChange}
              onblur={sfGpsDsHandleDateBlur}
              onfocus={sfGpsDsHandleDateFocus}
            />
          </div>
        </div>

        <div class="govuk-date-input__item">
          <div class={computedItemFormGroupClassName}>
            <label
              class="govuk-label govuk-date-input__label"
              for="date-input-year"
            >
              {yearLabel}
            </label>

            <input
              class={computedDateYearInputClassName}
              type="text"
              id="date-input-year"
              value={yearValue}
              aria-label={ariaLabel}
              tabindex={tabIndex}
              readonly={readOnly}
              aria-readonly={readOnly}
              required={required}
              placeholder={placeholder}
              disabled={disabled}
              inputmode="numeric"
              name="date-input-year"
              aria-invalid={ariaInvalid}
              onkeyup={sfGpsDsHandleYearChange}
              onchange={sfGpsDsHandleYearChange}
              onblur={sfGpsDsHandleDateBlur}
              onfocus={sfGpsDsHandleDateFocus}
            />
          </div>
        </div>
      </div>

      <!-- hidden input for original widget -->
      <div class="slds-form-element__control">
        <input
          type={type}
          data-id="date-picker-slds-input"
          value={_displayValue}
          required={required}
          hidden
        />
      </div>
    </fieldset>
  </div>
</template>
