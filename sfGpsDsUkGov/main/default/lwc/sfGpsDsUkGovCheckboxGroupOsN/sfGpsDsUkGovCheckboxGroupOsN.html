<template>
  <div
    id="sf-gps-ds-uk-gov-checkbox-group-os-n"
    class={computedFormGroupClassName}
    data-sfgpsds-input
  >
    <fieldset
      if:true={isCheckbox}
      class="govuk-fieldset"
      aria-describedby={computedAriaDescribedBy}
    >
      <legend class={computedLegendClassName}>
        <h3 class="govuk-fieldset__heading">{label}</h3>
        <slot name="label"> </slot>
      </legend>

      <div if:true={fieldLevelHelp} id="helper" class="govuk-hint">
        {fieldLevelHelp}
      </div>

      <p
        if:true={sfGpsDsIsError}
        class="govuk-error-message"
        aria-live="assertive"
        role="alert"
        id="errorMessageBlock"
      >
        <span class="govuk-visually-hidden">{sfGpsDsErrorSrLabel}</span>
        {sfGpsDsErrorMessage}
      </p>

      <div class="govuk-checkboxes">
        <template for:each={internalOpts} for:item="option" for:index="index">
          <div class="govuk-checkboxes__item" key={option.id}>
            <input
              class="govuk-checkboxes__input"
              type="checkbox"
              required={required}
              disabled={disabled}
              id={option.id}
              tabindex={tabIndex}
              name={name}
              aria-invalid={isError}
              aria-describedby={computedAriaDescribedBy}
              checked={option.selected}
              value={option.value}
              data-index={index}
              onfocus={handleFocus}
              onchange={sfGpsDsOnChangeValue}
              onkeydown={handleKeyDownEvent}
            />
            <label
              class="govuk-label govuk-checkboxes__label"
              data-index={index}
              for={option.id}
            >
              {option.label}
            </label>
          </div>
        </template>
      </div>
    </fieldset>

    <!-- TODO: support button and icon -->
  </div>
</template>
