<template>
  <div>
    <div lwc:if={isDisplayCheckbox} class="slds-form-element__control">
      <div class="slds-checkbox">
        <fieldset class="slds-form-element">
          <legend class="active slds-p-top_none slds-show">
            <span
              class="slds-form-element__legend slds-form-element__label slds-show_inline slds-float_none slds-var-p-top_xxx-small"
            >
              <abbr
                lwc:if={_required}
                title={requiredLabel}
                class="slds-required"
                >*</abbr
              >
              {label}
            </span>
          </legend>

          <span class="slds-clearfix">
            <slot name="label"> </slot>
            {fieldLevelHelp}
          </span>

          <input
            id="checkbox"
            name={name}
            data-sfgpsds-input
            type={type}
            required={_required}
            disabled={computedDisabled}
            tabindex={tabIndex}
            aria-invalid={_isError}
            checked={checked}
            value={value}
            onfocus={handleFocus}
            onchange={handleChange}
          />
          <label class="slds-checkbox__label" for="checkbox">
            <span class="slds-checkbox_faux"></span>
            <span class="slds-form-element__label"> {label} </span>
          </label>
        </fieldset>
      </div>
    </div>

    <div lwc:elseif={isImage} class="slds-form-element__control">
      <fieldset class="slds-form-element">
        <legend
          lwc:if={label}
          class="slds-float_left slds-p-top_none slds-show"
        >
          <abbr lwc:if={_required} title="required" class="slds-required"
            >*</abbr
          >
          <span
            class="slds-form-element__legend slds-form-element__label slds-show_inline slds-float_none slds-var-p-top_xxx-small"
          >
            {label}
          </span>
        </legend>

        <span class="slds-clearfix">
          {fieldLevelHelp}
          <slot name="label"></slot>
        </span>

        <div>
          <template
            for:each={_internalOptions}
            for:item="item"
            for:index="index"
          >
            <div key={item.id} class={computedWrapperClassName}>
              <input
                id={item.id}
                name={item.name}
                data-sfgpsds-input
                data-index={index}
                data-checked={item.selected}
                type={type}
                tabindex={tabIndex}
                disabled={computedDisabled}
                aria-invalid={_isError}
                checked={item.selected}
                value={item.value}
                onfocus={handleFocus}
                onkeydown={handleKeyDown}
                onchange={handleChange}
              />
              <label class={computedImageClassName} for={item.id}>
                <div class="slds-img-item_select-container">
                  <template lwc:if={isImageDisplay}>
                    <img
                      lwc:if={item.imgId}
                      class="slds-img-item"
                      src={item.imgId}
                      alt={item.alt}
                      title={item.label}
                    />
                    <span lwc:else class="slds-img-item-caption">
                      {item.label}
                    </span>
                  </template>
                </div>

                <template lwc:if={enabledCaption}>
                  <div
                    lwc:if={item.imgId}
                    class="slds-caption-out_cont slds-p-top_none"
                  >
                    <span class="captionOut slds-form-element__label"
                      >{item.label}</span
                    >
                  </div>
                </template>
              </label>
            </div>
          </template>
        </div>
      </fieldset>
    </div>

    <div lwc:if={_isError} class="slds-form-element__help">{_errorMessage}</div>
  </div>
</template>
