<!-- sldsValidatorIgnore -->
<template>
  <slot>
    <div class="omni-typeahead-container">
      <c-sf-gps-ds-osrt-typeahead
        type="text"
        if:false={_propSetMap.enableLookup}
        field-level-help={_handleHelpText}
        field-level-help-position={_propSetMap.helpTextPos}
        label={_propSetMap.label}
        onblur={handleBlur}
        onlastitemclick={enterEditMode}
        onselect={handleSelect}
        onclear={handleClear}
        icon-name-right="utility:empty"
        options={options}
        placeholder={_placeholder}
        required={_propSetMap.required}
        min-length={_propSetMap.minLength}
        max-length={_propSetMap.maxLength}
        required-label={allCustomLabelsUtil.OmniRequired}
        message-when-value-missing={_messageWhenValueMissing}
        message-when-too-short={_messageWhenTooShort}
        message-when-too-long={_messageWhenTooLong}
        theme={_theme}
        value={elementValue}
        remote-source={_useRemoteSource}
        disable-filter={_disableFilter}
        readonly={_propSetMap.readOnly}
        data-omni-input
      >
        <button
          if:false={_propSetMap.hideEditButton}
          class="slds-button slds-button_icon nds-button nds-button_icon"
          slot="iconRight"
          aria-expanded={_isEditMode}
          onclick={toggleEditMode}
        >
          <c-sf-gps-ds-osrt-icon
            icon-name="utility:edit"
            extraclass="slds-button__icon nds-button__icon"
            size="x-small"
            theme={_theme}
            alternative-text={_editLabel}
          ></c-sf-gps-ds-osrt-icon>
        </button>

        <a slot="lastItem" if:true={_newItemLabel} label={_newItemLabel}
          >{_newItemLabel}</a
        >
      </c-sf-gps-ds-osrt-typeahead>

      <c-sf-gps-ds-osrt-typeahead
        type="text"
        if:true={_propSetMap.enableLookup}
        field-level-help={_handleHelpText}
        field-level-help-position={_propSetMap.helpTextPos}
        label={_propSetMap.label}
        onblur={handleBlur}
        onselect={handleSelect}
        onlookupfocus={handleLookupFocus}
        icon-name-right="utility:down"
        options={options}
        placeholder={_placeholder}
        required={_propSetMap.required}
        required-label={allCustomLabelsUtil.OmniRequired}
        min-length={_propSetMap.minLength}
        max-length={_propSetMap.maxLength}
        message-when-value-missing={_messageWhenValueMissing}
        message-when-too-short={_messageWhenTooShort}
        message-when-too-long={_messageWhenTooLong}
        theme={_theme}
        value={elementValue}
        remote-source
        disable-filter={_disableFilter}
        data-omni-input
      >
        <button
          class="slds-button slds-button_icon nds-button nds-button_icon"
          slot="iconRight"
          onkeydown={handleLookupButtonKeyDown}
          aria-expanded={_showLookupOptions}
          onclick={handleLookupButtonDropdownClick}
          tabindex="-1"
        >
          <c-sf-gps-ds-osrt-icon
            icon-name="utility:down"
            extraclass="slds-button__icon nds-button__icon"
            size="x-small"
            theme={_theme}
            alternative-text={allCustomLabelsUtil.OmniTypeaheadDropdownIcon}
          ></c-sf-gps-ds-osrt-icon>
        </button>
      </c-sf-gps-ds-osrt-typeahead>

      <div if:true={errorMessage} class="slds-has-error nds-has-error">
        <span
          class="slds-form-element__help nds-form-element__help nds-form-element__help_text-transform__none"
          >{errorMessage}</span
        >
      </div>
    </div>
  </slot>
</template>
