# OmniScript Base Element (omniscriptBaseElement)

This is the base component for LWC OmniScript. Majority of OmniScript LWCs derive from this component. It contains all common properties and methods that can be overridable.

### Properties

| Name                   | Scope           | Description                                                                                                                                                                                                                                           |
| ---------------------- | --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| elementValue           | track (private) | Reactive private property. The component rerenders when it changes. This is the key property to display the data entered by the user or coming from the API responses in the input elements or store the aggregated JSON data for the group elements. |
| jsonDef                | api (public)    | Reactive public property. Set it with JSON Definition of an OmniScript or an OmniScript element (one OmniScript forms is a component tree).                                                                                                           |
| seedJson               | api (public)    | Reactive public property. It is a collection of URL prefill, seed data set up in the designer and cached JSON from API calls.                                                                                                                         |
| layout                 | api (public)    | Reactive public property. Determines which LWC player to use - lightning or newport.                                                                                                                                                                  |
| resume                 | api (public)    | Reactive public property. Whether the OmniScript is run in new-launch or resume mode.                                                                                                                                                                 |
| scriptHeaderDef        | api (public)    | Reactive public property. It is used to pass down the script header property to the OmniScript child components.                                                                                                                                      |
| jsonData               | api (public)    | Reactive public property. It is used to pass down data JSON of the OmniScript to all OmniScript child components.                                                                                                                                     |
| jsonDataStr            | api (public)    | Reactive public property. It is the stringified data JSON to overcome the LWC performance issue of JSON.stringify the proxy Object.                                                                                                                   |
| runMode                | api (public)    | Flag to determine whether the OmniScript (active or inactive) is being run inside the designer or not.                                                                                                                                                |
| defaultValue           | private         | get defaultValue() - Getter to get default value of the OmniScript element                                                                                                                                                                            |
| nullVal                | private         | get nullVal() - Getter to overwrite the definition of null value                                                                                                                                                                                      |
| \_jsonPath             | private         | get \_jsonPath() - Getter to find the JSON path of the Element                                                                                                                                                                                        |
| \_focusOnInitialRender | private         | Flag used to focus an element that was cloned via repeat                                                                                                                                                                                              |

### Methods

| Signature                                              | Scope   | Return Value | Description                                                                                                                                                                                                                                                   |
| ------------------------------------------------------ | ------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| applyCallResp(json, bApi = false, bValidation = false) | public  | void         | API method to apply API responses back to OmniScript                                                                                                                                                                                                          |
| combinedWatch()                                        | private | void         | Watch method - gets called initially in renderedCallback and later when data JSON changes                                                                                                                                                                     |
| initCompVariables()                                    | private | void         | Method to initialize private component variables                                                                                                                                                                                                              |
| stateRefresh()                                         | private | void         | Gets called in combinedWatch to allow real-time refresh of Text Block, Formula, etc.                                                                                                                                                                          |
| omniShow()                                             | private | Boolean      | Method to handle show/hide of OmniScript elements, gets called in combinedWatch                                                                                                                                                                               |
| validityHook()                                         | private | void         | Method to take care of the client side validation check, gets called in omniShow()                                                                                                                                                                            |
| applyCtrlWidth()                                       | private | void         | Method to handle grid width of OmniScript elements                                                                                                                                                                                                            |
| renderedCallback()                                     | private | void         | Overwrite of native LWC renderedCallback. It takes care of applying default value, URL prefill , seed data set up in the designer, cached JSON from api responses to the OmniScript. It also initializes the watch for show/hide, client side validation etc. |
| initialRenderCallBack                                  | private | void         | Custom lifecycle hook, being called during first render cycle                                                                                                                                                                                                 |
| connectedCallback()                                    | private | void         | Overwrite of native LWC connectedCallback. Initialize the OmniScript component                                                                                                                                                                                |
| constructor()                                          | private | void         | Initialization                                                                                                                                                                                                                                                |
| createAggregateNode()                                  | private | Object       | Method to create the JSON data for omniaggregate event (aggregation event to build up data JSON of the OmniScript)                                                                                                                                            |
| shouldNullify(json)                                    | private | Boolean      | Method to determine whether to overwrite the defintion of null value                                                                                                                                                                                          |
| treatResp(json)                                        | private | Object       | Method to pre-process the JSON                                                                                                                                                                                                                                |
| setElementValue(json, bApi, bValidation)               | private | void         | Method to set elementValue, it also calls setElementFormattedValue()                                                                                                                                                                                          |
| setElementFormattedValue()                             | private | void         | Method to make formatted data of the input elements to be avaiable for display in Text Block, etc.                                                                                                                                                            |
| canRepeat                                              | private | Boolean      | Method to determine whether the element can repeat                                                                                                                                                                                                            |
| canRemove                                              | private | Boolean      | Method to determine whether the repeated element can be deleted                                                                                                                                                                                               |
| handleAdd                                              | public  | void         | Method to repeat element                                                                                                                                                                                                                                      |
| handleRemove                                           | private | void         | Method to delete repeated element                                                                                                                                                                                                                             |
| handleRepeat                                           | private | void         | Auxiliary method for both handleAdd or handleRemove                                                                                                                                                                                                           |
| sendDataToDebugConsole                                 | private | void         | Method to send remote call debug logs to the designer debug widget                                                                                                                                                                                            |
| focus                                                  | private | void         | Abstract method for focusing the element                                                                                                                                                                                                                      |

### Usage

Majority of the OmniScript LWCs derive from this component, for example, omniscriptText, due to LWC inheritance model, knowledge of this component will help you better customize your custom LWC derived from OmniScript OOTB LWCs.
