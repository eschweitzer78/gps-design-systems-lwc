<!-- sldsValidatorIgnore -->
<template>
  <div if:false={isCustomLwc} class={errorClass}>
    <div class="rpl-form">
      <div class="rpl-fieldset">
        <div class={computedFormGroupClassName}>
          <label lwc:if={labelVisible} for={inputId}>
            <span>{label}</span>
            <slot name="label"> </slot>
          </label>

          <div lwc:if={fieldLevelHelp} id="helper" class="hint">
            {fieldLevelHelp}
          </div>

          <div class="field-wrap">
            <!-- formula -->
            <div lwc:if={_isFormula}>
              <label for={inputId}>
                <span>{label}</span>
              </label>

              <input
                type="text"
                readonly
                disabled
                id={inputId}
                value={maskedValue}
                aria-describedby={computedAriaDescribedBy}
              />
            </div>

            <div if:false={static} class={pretextClass}>
              <span lwc:if={pretext}>{pretext}</span>

              <template lwc:if={isCurrencySFlocale}>
                <input
                  lwc:if={isInput}
                  id={inputId}
                  tabindex={tabIndex}
                  accesskey={accessKey}
                  step={step}
                  min={min}
                  max={max}
                  maxlength={maxLength}
                  minlength={minLength}
                  type={type}
                  inputmode={inputmode}
                  disabled={disabled}
                  required={required}
                  readonly={readOnly}
                  placeholder={placeholder}
                  aria-readonly={readOnly}
                  aria-labelledby={ariaLabelledBy}
                  aria-describedby={computedAriaDescribedBy}
                  aria-label={ariaLabel}
                  aria-invalid={sfGpsDsIsError}
                  value={_currencyVal}
                  onfocus={handleFocus}
                  onblur={handleBlur}
                  oninput={handleInput}
                  onkeyup={handleKeyup}
                  onchange={handleChange}
                />
              </template>

              <template lwc:else>
                <input
                  lwc:if={isNumber}
                  class="hiddenNumber slds-hide"
                  required={required}
                  min={min}
                  max={max}
                  step={step}
                  type="number"
                  value={value}
                />

                <input
                  lwc:if={isInput}
                  id={inputId}
                  tabindex={tabIndex}
                  accesskey={accessKey}
                  step={step}
                  min={min}
                  max={max}
                  maxlength={maxLength}
                  minlength={minLength}
                  type={inputType}
                  inputmode={inputmode}
                  disabled={disabled}
                  required={required}
                  readonly={readOnly}
                  aria-readonly={readOnly}
                  placeholder={placeholder}
                  aria-labelledby={ariaLabelledBy}
                  aria-describedby={computedAriaDescribedBy}
                  aria-label={ariaLabel}
                  autocomplete={autocomplete}
                  name={name}
                  aria-invalid={sfGpsDsIsError}
                  onfocus={handleFocus}
                  onblur={handleBlur}
                  oninput={handleInput}
                  onkeyup={handleKeyup}
                  onchange={handleChange}
                />
              </template>
            </div>
          </div>

          <span lwc:if={posttext} class="sfgpsds-form-element__addon">
            {posttext}
          </span>

          <div
            lwc:if={sfGpsDsIsError}
            id="errorMessageBlock"
            class="errors help-block"
            aria-live="assertive"
            role="alert"
          >
            <span>{sfGpsDsErrorMessage}</span>
          </div>
        </div>

        <!-- shifted testing static one level up to avoid the empty div -->
        <div lwc:if={static} class="slds-grid">
          <div class="slds-form-element__static">{maskedValue}</div>
        </div>

        <span lwc:if={inlineHelp} class="slds-form-element__static">
          {inlineHelp}
        </span>
      </div>
    </div>
  </div>
</template>
