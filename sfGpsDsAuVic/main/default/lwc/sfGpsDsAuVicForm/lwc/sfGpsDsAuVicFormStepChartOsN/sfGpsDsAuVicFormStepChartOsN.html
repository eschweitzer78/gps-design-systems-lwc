<!-- sldsValidatorIgnore -->
<template>
  <template lwc:if={isVertical}>
    <div class="sfgpsds-omniscript_stepform">
      <omnistudio-omniscript-formatted-rich-text
        class="slds-text-longform slds-path__guidance-content"
        value={stepInstruction}
      >
      </omnistudio-omniscript-formatted-rich-text>

      <h3
        class="sfgpsds-page-header__title slds-truncate omni-stepchart-heading"
      >
        {_scriptHeaderDef.allCustomLabels.OmniStepChartLabel}
      </h3>

      <div class="sfgpdsds-progress sfgpsds-progress_vertical">
        <h4 class="sfgpsds-assistive-text">Progress indicator</h4>

        <ol class="sfgpsds-progress__list">
          <template for:each={stepDef} for:item="step" for:index="index">
            <li class="sfgpsds-progress__item" key={step.name}>
              <div class="sfgpsds-progress__line-container">
                <div class="sfgpsds-progress__line"></div>
              </div>
              <c-sf-gps-ds-au-vic-form-step-chart-item-os-n
                json-def={step}
                is-vertical={isVertical}
                last-step-index={lastStepIndex}
                last-executed-step-index={_lastExecutedStepIndex}
                first-visible-step-index={firstVisibleStepIndex}
                current-index={currentIndex}
                current-step-index={index}
                script-header-def={scriptHeaderDef}
              >
              </c-sf-gps-ds-au-vic-form-step-chart-item-os-n>
            </li>
          </template>
        </ol>
      </div>
    </div>
  </template>

  <template lwc:else>
    <div
      class="slds-omniscript_stepform slds-size_1-of-1 slds-small-size_1-of-1 slds-large-size_8-of-12 slds-align_absolute-center slds-grid slds-m-top_xx-large slds-m-bottom_x-large"
    >
      <div class="slds-size_1-of-1">
        <div class="slds-progress slds-size_1-of-1">
          <ol class="slds-progress__list">
            <template for:each={stepDef} for:item="step" for:index="index">
              <li key={step.name} class="slds-progress__item">
                <c-sf-gps-ds-au-vic-form-step-chart-item-os-n
                  json-def={step}
                  is-vertical={isVertical}
                  json-data={jsonDef.response}
                  current-index={currentIndex}
                  current-step-index={index}
                  script-header-def={scriptHeaderDef}
                >
                </c-sf-gps-ds-au-vic-form-step-chart-item-os-n>
              </li>
            </template>
          </ol>

          <div
            class="slds-progress-bar slds-progress-bar_x-small"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow={stepProgressValue}
            role="progressbar"
          >
            <span class="slds-assistive-text">
              Progress: {stepProgressValue}&percnt;
            </span>
          </div>
        </div>
      </div>
    </div>
  </template>
</template>
