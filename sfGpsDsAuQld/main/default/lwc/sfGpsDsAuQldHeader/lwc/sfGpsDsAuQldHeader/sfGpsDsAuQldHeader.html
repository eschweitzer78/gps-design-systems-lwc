<!-- sldsValidatorIgnore -->
<template lwc:render-mode="light">
  <!-- Main header container with banner role -->
  <header class={computedClassName} role="banner">
    <!-- Navigation bar for skip links -->
    <nav
      class="qld__skip-link"
      aria-label={i18n.skipLinksAriaLabel}
      tabindex="-1"
    >
      <a
        class="qld__skip-link__link"
        href={computedContentIdRef}
        onclick={handleSkipToMainContent}
      >
        {i18n.skipToMainContent}
      </a>
      <a
        class="qld__skip-link__link"
        href={computedMainNavIdRef}
        onclick={handleSkipToMainNav}
      >
        {i18n.skipToMainNav}</a
      >
    </nav>

    <!-- Pre-header section with logo and links -->
    <div class={computedPreHeaderClassName}>
      <div class="container-fluid">
        <!-- Government link and logo used for mobile display -->
        <a href={preHeaderUrl} target="_self">
          <span class="qld__header__pre-header-url">{preHeaderText}</span>
          <img
            lwc:if={preHeaderLogo}
            class="qld__header__pre-header-brand-image"
            alt={preHeaderLogoAlt}
            src={preHeaderLogo}
          />
          <span lwc:else class="qld__header__pre-header-url--mobile"
            >{preHeaderText}</span
          >
        </a>

        <!-- CTA wrapper for right aligned links in the preHeader -->
        <div class="qld__header__cta-wrapper">
          <a lwc:if={ctaOneLink} class="qld__header__cta-link" href={ctaOneUrl}>
            <span lwc:if={ctaOneIcon} class="qld__header__cta-link-icon">
              <svg
                class="qld__icon"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href={computedCtaOneIconUrl}></use>
              </svg>
            </span>
            <span class="qld__header__cta-link-text">{ctaOneText}</span>
          </a>
          <a lwc:if={ctaTwoLink} class="qld__header__cta-link" href={ctaTwoUrl}>
            <span lwc:if={ctaTwoIcon} class="qld__header__cta-link-icon">
              <svg
                class="qld__icon"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href={computedCtaTwoIconUrl}></use>
              </svg>
            </span>
            <span class="qld__header__cta-link-text">{ctaTwoText}</span>
          </a>

          <a
            lwc:if={computedAuthShowProfile}
            href={profileUrl}
            class="qld__header__cta-link"
          >
            <span lwc:if={profileIcon} class="qld__header__cta-link-icon">
              <svg
                class="qld__icon"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href={computedProfileIconUrl}></use>
              </svg>
            </span>
            <span class="qld__header__cta-link-text">{profileText}</span>
          </a>

          <template lwc:if={computedAuthShowLogin}>
            <a href={computedAuthUrl} class="qld__header__cta-link">
              <span class="qld__header__cta-link-icon">
                <svg
                  class="qld__icon"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <use href={computedAuthIconUrl}></use>
                </svg>
              </span>
              <span class="qld__header__cta-link-text">{computedAuthText}</span>
            </a>
          </template>
        </div>

        <!-- Main navigation controls (Search and Menu buttons on mobile and tablet screens) -->
        <div class="qld__header__main-nav-controls">
          <!-- Search button -->
          <button
            lwc:if={searchLabel}
            aria-controls={computedHeaderSearchId}
            class={computedSearchButtonClassName}
            aria-expanded={_searchIsOpen}
            onclick={handleSearchButtonClick}
          >
            <!-- Search and close icons -->
            <svg
              aria-hidden="true"
              focusable="false"
              xmlns="http://www.w3.org/2000/svg"
              class="qld__icon qld__icon--lg qld__main-nav__toggle-search-icon"
            >
              <use href={computedIconSearchUrl}></use>
            </svg>
            <svg
              aria-hidden="true"
              focusable="false"
              xmlns="http://www.w3.org/2000/svg"
              class="qld__icon qld__icon--lg qld__main-nav__toggle-search-close-icon"
            >
              <use href={computedIconCloseUrl}></use>
            </svg>

            <!-- Search button label -->
            <span class="qld__main-nav__toggle-text">{searchLabel}</span>
          </button>

          <!-- Menu button -->
          <button
            lwc:if={menuLabel}
            aria-controls={mainNavId}
            class="qld__header__toggle-main-nav qld__main-nav__toggle--open"
            aria-expanded={_menuIsOpen}
            onclick={handleMainNavButtonClick}
          >
            <!-- Menu icon -->
            <svg
              aria-hidden="true"
              focusable="false"
              xmlns="http://www.w3.org/2000/svg"
              class="qld__icon qld__icon--lg"
            >
              <use href={computedIconMenuUrl}></use>
            </svg>
            <!-- Menu button label -->
            <span class="qld__main-nav__toggle-text">{menuLabel}</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Main header section -->
    <div class={computedMainClassName}>
      <div class="container-fluid">
        <!-- Header brand section -->
        <div class="qld__header__brand">
          <a href={computedHeaderUrl}>
            <!-- QLD Government logo -->
            <div lwc:if={showSiteLogo} class="qld__header__brand-image">
              <img
                lwc:if={siteLogo}
                src={siteLogo}
                alt={siteLogoAlt}
                title={siteLogoAlt}
                width="170"
                height="56"
              />
              <svg
                lwc:else
                xmlns="http://www.w3.org/2000/svg"
                role="img"
                width="170"
                height="56"
                aria-label="Queensland Government logo"
              >
                <use href={computedDefaultLogoUrl}></use>
              </svg>
            </div>

            <!-- Secondary Logo or Site name and description -->
            <div lwc:if={hasSiteLogoSecondary} class="qld__header__site-name">
              <picture>
                <source
                  lwc:if={siteLogoSecondaryMobile}
                  media="(max-width: 991px)"
                  srcset={siteLogoSecondaryMobile}
                />
                <source
                  media="(max-width: 3000px)"
                  srcset={siteLogoSecondary}
                />
                <img
                  class="qld__header__secondary-image"
                  alt={title}
                  src={siteLogoSecondary}
                />
              </picture>
            </div>
            <div lwc:else class="qld__header__site-name">
              <span class="qld__header__heading">{title}</span>
              <span class="qld__header__subline">{subtitle}</span>
            </div>
          </a>
        </div>

        <!-- Search form section -->
        <div
          lwc:if={searchLabel}
          class={computedHeaderSearchClassName}
          id={computedHeaderSearchId}
        >
          <div class="qld__main-nav__focus-trap-top"></div>
          <div class="qld__search-form--wrapper">
            <form
              role="search"
              aria-label={i18n.searchFormAriaLabel}
              class="qld__search-form"
              action={computedGlobalSearchActionUrl}
            >
              <label
                for={computedHeaderSearchInputId}
                class="qld__label qld__display-lg qld__search-form__label"
              >
                {searchFieldLabel}
              </label>

              <div class="qld__search-form__inner">
                <svg
                  class="qld__icon qld__icon--sm qld__search-form__inner-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  aria-hidden="true"
                >
                  <use href={computedIconSearchUrl}></use>
                </svg>
                <!-- text vs search to avoid event -->
                <input
                  lwc:ref="query"
                  type="text"
                  id={computedHeaderSearchInputId}
                  name="query"
                  class="qld__text-input"
                  autocomplete="off"
                />
                <input
                  type="text"
                  name="name"
                  autocomplete="off"
                  tabindex="-1"
                  class="qld__text-input--validation"
                />

                <div class="qld__search-form__btn">
                  <button
                    class="qld__btn qld__btn--search"
                    type="submit"
                    aria-label={i18n.searchButtonAriaLabel}
                    onclick={handleSearch}
                  >
                    <span class="qld__btn__icon">
                      <svg
                        class="qld__icon"
                        xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true"
                      >
                        <use href={computedIconSearchUrl}></use>
                      </svg>
                    </span>
                    <span class="qld__btn__text">{searchLabel}</span>
                  </button>
                </div>
              </div>
            </form>
          </div>
          <div class="qld__main-nav__focus-trap-bottom"></div>
        </div>
      </div>
    </div>
  </header>
</template>
