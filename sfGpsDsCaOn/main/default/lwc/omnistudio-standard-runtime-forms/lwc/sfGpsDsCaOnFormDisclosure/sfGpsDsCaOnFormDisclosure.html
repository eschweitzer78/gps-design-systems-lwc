<!-- sldsValidatorIgnore -->
<!--
  Ontario Design System - Disclosure Component for OmniStudio
  
  Displays disclosure content (rich text) with a required acceptance checkbox.
  Used for terms and conditions, privacy policies, consent forms, etc.
  
  Compliance:
  - LWR: Compatible (Light DOM pattern)
  - LWS: Compatible (no restricted APIs)
  - Ontario DS: Follows form field and checkbox patterns
  - WCAG 2.1 AA: 
    - Checkbox properly labeled
    - Disclosure content linked via aria-describedby
    - Error messages with role="alert"
    - Keyboard accessible
-->
<template>
  <div class="ontario-form-group sfgpsdscaon-disclosure">
    <!-- Label -->
    <label lwc:if={mergedLabel} class="ontario-label">
      {mergedLabel}
      <span lwc:if={_propSetMap.required} class="ontario-label__flag">(required)</span>
    </label>

    <!-- Disclosure content -->
    <div id={_disclosureId} class="ontario-callout sfgpsdscaon-disclosure__content">
      <c-sf-gps-ds-osrt-omniscript-formatted-rich-text
        value={_dText}
      >
      </c-sf-gps-ds-osrt-omniscript-formatted-rich-text>
    </div>

    <!-- Error message -->
    <div 
      lwc:if={hasError}
      id={_errorId}
      class="ontario-error-messaging"
      role="alert"
      aria-live="assertive"
    >
      <svg class="ontario-icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
      </svg>
      <span class="ontario-error-messaging__content">{sfGpsDsErrorMessage}</span>
    </div>

    <!-- Consent checkbox -->
    <div class="ontario-checkboxes sfgpsdscaon-disclosure__consent">
      <div class="ontario-checkboxes__item">
        <input
          type="checkbox"
          class={computedCheckboxClassName}
          id={_checkboxId}
          name={_name}
          checked={elementValue}
          disabled={_propSetMap.readOnly}
          required={_propSetMap.required}
          aria-describedby={computedAriaDescribedBy}
          aria-invalid={hasError}
          data-omni-input
          onchange={handleChange}
        />
        <label class="ontario-checkboxes__label" for={_checkboxId}>
          {mergedCheckLabel}
        </label>
      </div>
    </div>
  </div>
</template>
