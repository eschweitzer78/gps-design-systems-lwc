<!-- sldsValidatorIgnore -->
<template>
  <fieldset
    class={computedFieldsetClassName}
    aria-describedby={computedAriaDescribedBy}
    aria-invalid={computedAriaInvalid}
    aria-required={computedAriaRequired}
  >
    <legend class="ontario-fieldset__legend">
      {mergedLabel}
      <span lwc:if={showRequiredFlag} class="ontario-label__flag"
        >(required)</span
      >
      <span lwc:if={showOptionalFlag} class="ontario-label__flag"
        >(optional)</span
      >
    </legend>

    <p lwc:if={mergedHelpText} id={hintId} class="ontario-hint">
      {mergedHelpText}
    </p>

    <div
      lwc:if={sfGpsDsIsError}
      id={errorId}
      class="ontario-error-messaging"
      role="alert"
      aria-live="assertive"
    >
      <svg
        class="ontario-icon"
        aria-hidden="true"
        focusable="false"
        viewBox="0 0 24 24"
      >
        <path
          d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
        />
      </svg>
      <span class="ontario-error-messaging__content"
        >{sfGpsDsErrorMessage}</span
      >
    </div>

    <!-- Visually hidden input for validation - holds aggregated value -->
    <!-- Uses text type (not hidden) so it participates in Constraint Validation -->
    <input
      type="text"
      class="sfgpsdscaon-validation-input"
      data-omni-input
      value={elementValue}
      required={_propSetMap.required}
      aria-hidden="true"
      tabindex="-1"
    />

    <div class="ontario-checkboxes">
      <template for:each={inlineDecoratedOptions} for:item="opt">
        <div class="ontario-checkboxes__item" key={opt.value}>
          <input
            type="checkbox"
            class="ontario-checkboxes__input"
            id={opt.id}
            name={_name}
            value={opt.value}
            checked={opt.checked}
            disabled={_propSetMap.readOnly}
            onchange={handleCheckboxChange}
            onblur={handleBlur}
          />
          <label class="ontario-checkboxes__label" for={opt.id}
            >{opt.label}</label
          >
        </div>
      </template>
    </div>
  </fieldset>
</template>
