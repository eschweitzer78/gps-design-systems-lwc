<template lwc:render-mode="light">
  <div class="ontario-form-group">
    <!-- Main Label -->
    <fieldset class="ontario-fieldset" aria-describedby={computedAriaDescribedBy}>
      <legend class="ontario-fieldset__legend">
        {label}
        <span lwc:if={showFlag} class="ontario-label__flag">
          ({flagText})
        </span>
      </legend>

      <!-- Hint Text -->
      <p lwc:if={hintText} id={_hintId} class="ontario-hint">
        {hintText}
      </p>

      <!-- Error Message -->
      <div
        lwc:if={hasError}
        id={_errorId}
        class="ontario-error-messaging"
        role="alert"
        aria-live="assertive"
      >
        <span class="ontario-error-messaging__icon">
          <svg
            class="ontario-icon"
            alt=""
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 24 24"
            preserveAspectRatio="xMidYMid meet"
          >
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
          </svg>
        </span>
        <span class="ontario-error-messaging__content">
          {displayErrorMessage}
        </span>
      </div>

      <!-- Date Input Group -->
      <div id={_groupId} class={computedGroupClassName}>
        <!-- Day Input -->
        <!-- AODA: Added aria-required and aria-describedby to all date fields -->
        <div class="ontario-date__group-input">
          <label for={_dayId} class="ontario-label ontario-label--small">
            {computedDayLabel}
          </label>
          <input
            id={_dayId}
            type="text"
            inputmode="numeric"
            pattern="[0-9]*"
            class={computedInputClassName}
            value={_dayValue}
            disabled={isDisabled}
            aria-required={required}
            aria-invalid={computedAriaInvalid}
            aria-describedby={computedAriaDescribedBy}
            oninput={handleDayInput}
            onblur={handleBlur}
            onkeydown={handleKeydown}
          />
        </div>

        <!-- Month Input -->
        <div class="ontario-date__group-input">
          <label for={_monthId} class="ontario-label ontario-label--small">
            {computedMonthLabel}
          </label>
          <input
            id={_monthId}
            type="text"
            inputmode="numeric"
            pattern="[0-9]*"
            class={computedInputClassName}
            value={_monthValue}
            disabled={isDisabled}
            aria-required={required}
            aria-invalid={computedAriaInvalid}
            aria-describedby={computedAriaDescribedBy}
            oninput={handleMonthInput}
            onblur={handleBlur}
            onkeydown={handleKeydown}
          />
        </div>

        <!-- Year Input -->
        <div class="ontario-date__group-input">
          <label for={_yearId} class="ontario-label ontario-label--small">
            {computedYearLabel}
          </label>
          <input
            id={_yearId}
            type="text"
            inputmode="numeric"
            pattern="[0-9]*"
            class={computedYearInputClassName}
            value={_yearValue}
            disabled={isDisabled}
            aria-required={required}
            aria-invalid={computedAriaInvalid}
            aria-describedby={computedAriaDescribedBy}
            oninput={handleYearInput}
            onblur={handleBlur}
            onkeydown={handleKeydown}
          />
        </div>
      </div>
    </fieldset>
  </div>
</template>
