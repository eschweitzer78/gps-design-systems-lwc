<!-- sldsValidatorIgnore -->
<template>
  <div class="nsw-grid">
    <!-- Inline Visual -->
    <div class={visualClassName}>
      <div
        class="sfgpsds-au-nsw-editblock"
        tabindex="0"
        role="button"
        data-edit-action="default"
        aria-invalid={isInvalid}
        aria-describedby={computedErrorTextId}
        aria-labelledby="inline-text"
        onclick={edit}
        onkeydown={handleKeyboardEdit}
      >
        <div class="sfgpsds-au-nsw-editblock__content">
          <div class="sfgpsds-au-nsw-editblock__icon">
            <span class="material-icons nsw-material-icons" aria-hidden="true">
              {svgMapIcon}
            </span>
          </div>
          <div class="sfgpsds-au-nsw-editblock__copy" id="inline-text">
            <template
              for:each={_displayValues}
              for:item="dvItem"
              for:index="dvIndex"
            >
              <p key={dvItem.lwcId} class="nsw-text__truncate">
                {dvItem.value}
              </p>
            </template>

            <span lwc:if={isInvalid} id="inline-text-error" class="sr-only">
              {allCustomLabelsUtil.OmniEditBlockError}
            </span>
          </div>
          <button
            lwc:if={_allowDelete}
            class="nsw-icon-button sfgpsds-au-nsw-editblock__delete"
            onclick={remove}
            aria-label={allCustomLabelsUtil.OmniDelete}
            data-remove-button
          >
            <span class="material-icons nsw-material-icons" aria-hidden="true">
              delete
            </span>
          </button>
        </div>
      </div>
    </div>

    <!-- Inline Editing -->
    <div class={editClassName}>
      <article class="sfgpsds-au-nsw-editblock--inline">
        <fieldset>
          <slot></slot>
          <div>
            <button
              onclick={cancel}
              class="nsw-button nsw-button--dark-outline"
            >
              {allCustomLabelsUtil.OmnicancelLabel}
            </button>

            <button
              onclick={save}
              disabled={isPageLoading}
              class="nsw-button nsw-button--dark-outline"
            >
              {allCustomLabelsUtil.OmniConfigProdModalOk}
            </button>
          </div>
        </fieldset>
      </article>
    </div>

    <!-- Add Button -->
    <div if:true={showAdd} class="nsw-col">
      <button
        type="button"
        class="nsw-button nsw-button--dark-outline editblock-new"
        onclick={handleAdd}
      >
        {_newLabel}
      </button>
    </div>
  </div>

  <!-- Spinner -->
  <c-sf-gps-ds-au-nsw-loader
    lwc:if={isPageLoading}
    label={allCustomLabelsUtil.OmniSpinnerTextLoading}
    size="md"
  >
  </c-sf-gps-ds-au-nsw-loader>
</template>
